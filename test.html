<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Rotating Dashed Upload</title>
        <style>
            :root {
                --my-white: #fff;
                --my-white-off2: #ccc;
                --my-border-secondary: #ccc;
                --radius-lg: 12px;
                --radius-xl: 20px;
                --fs-sm: 14px;
                --my-text-quaternary: #666;
            }

            /* Upload card */
            .upload-card {
                background: var(--my-white);
                padding: 28px 28px 18px 28px;
                border-radius: var(--radius-xl);
                width: 400px;
                text-align: center;
                border: 1px solid var(--my-border-secondary);
                margin: 50px auto;
            }

            /* Title */
            .upload-card h4 {
                margin-bottom: 20px;
                font-size: 22px;
                color: #333;
            }

            /* Upload area */
            .upload-area {
                display: block;
                /* allows width/height */
                width: 100%;
                height: 300px;
                /* desired height */
                position: relative;
                cursor: pointer;
                overflow: hidden;
                border-radius: var(--radius-lg);
            }

            /* Rotating dashed border container */
            .rotating-dashed {
                position: relative;
                width: 100%;
                height: 100%;
            }

            /* Dashed lines animation */
            .rotating-dashed .dashing {
                display: block;
                width: 100%;
                height: 100%;
                position: absolute;
            }

            .rotating-dashed .dashing:nth-of-type(1) {
                transform: rotate(0deg);
            }

            .rotating-dashed .dashing:nth-of-type(2) {
                transform: rotate(90deg);
            }

            .rotating-dashed .dashing:nth-of-type(3) {
                transform: rotate(180deg);
            }

            .rotating-dashed .dashing:nth-of-type(4) {
                transform: rotate(270deg);
            }

            .rotating-dashed .dashing i {
                display: block;
                position: absolute;
                left: 0;
                top: 0;
                width: 200%;
                border-bottom: 2px dashed var(--my-white-off2);
                animation: slideDash 2s linear infinite;
            }

            /* Centered icon and text */
            .rotating-dashed .my-radius-md {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--my-white);
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }

            .rotating-dashed p {
                position: absolute;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                color: var(--my-text-quaternary);
                margin: 0;
                font-size: var(--fs-sm);
            }

            /* File input invisible */
            .upload-area input[type="file"] {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                opacity: 0;
                cursor: pointer;
            }

            /* Error message */
            .error-message {
                color: red;
                font-size: 13px;
                margin-top: 8px;
                display: none;
            }

            /* Image preview */
            #preview {
                max-width: 80%;
                max-height: 150px;
                display: none;
                margin: 10px auto;
                border-radius: 8px;
                object-fit: cover;
                position: relative;
                z-index: 2;
            }

            /* Animate dashed line */
            @keyframes slideDash {
                from {
                    transform: translateX(0);
                }

                to {
                    transform: translateX(-50%);
                }
            }
        </style>
    </head>

    <body>

        <div class="upload-card">
            <h4>Upload Your File</h4>
            <label class="upload-area" id="uploadArea">
                <div class="rotating-dashed">
                    <span class="dashing"><i></i></span>
                    <span class="dashing"><i></i></span>
                    <span class="dashing"><i></i></span>
                    <span class="dashing"><i></i></span>

                    <!-- Center icon -->
                    <div class="my-radius-md">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M6.666 13.333L9.999 10M9.999 10L13.333 13.333M9.999 10V17.5" stroke="#414651"
                                stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>

                    <p>Drag & drop your file here<br>or click to select</p>
                    <input type="file" id="fileInput" accept="*/*">
                </div>
                <img id="preview" alt="Preview">
            </label>
            <div class="error-message" id="errorMessage">Invalid file type. Please upload an image.</div>
        </div>

        <script>
            let onlyImages = false; // default: allow any file

            // Call this function to allow only images
            function setImageUploadMode(value) {
                onlyImages = value;
                const input = document.getElementById('fileInput');
                input.value = '';
                document.getElementById('preview').style.display = 'none';
                document.getElementById('errorMessage').style.display = 'none';
            }

            // Handle file selection
            const fileInput = document.getElementById('fileInput');
            const preview = document.getElementById('preview');
            const errorMessage = document.getElementById('errorMessage');

            fileInput.addEventListener('change', () => {
                const file = fileInput.files[0];
                handleFile(file);
            });

            function handleFile(file) {
                if (!file) return;

                if (onlyImages && !file.type.startsWith('image/')) {
                    errorMessage.style.display = 'block';
                    preview.style.display = 'none';
                    fileInput.value = '';
                    return;
                }

                errorMessage.style.display = 'none';

                // Show preview if image
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = e => {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else {
                    preview.style.display =